/**
 * @fileoverview Firestore Security Rules for Prototyping.
 *
 * Core Philosophy:
 * This ruleset adopts a secure-by-default posture, requiring authentication for all data access. It prioritizes ease of iteration and rapid prototyping by focusing on authorization. The intention is to validate relationships and ownership. Data validation is relaxed.
 *
 * Data Structure:
 * The Firestore database contains a top-level collection `dispatchSchedules`. There is no user-specific data at this time.
 *
 * Key Security Decisions:
 * - All read and write operations require user authentication.
 * - The `dispatchSchedules` collection is write-protected (no one can create, update or delete at the moment).
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    /**
     * @description Enforces authentication for all access to dispatch schedules.
     * @path /dispatchSchedules/{dispatchScheduleId}
     * @allow (get, list): Any authenticated user can read dispatch schedules.
     * @deny (create, update, delete): No one can create, update, or delete dispatch schedules in this prototype.
     * @principle Requires user authentication for all operations.
     */
    match /dispatchSchedules/{dispatchScheduleId} {
      allow get, list: if isSignedIn();
      allow create, update, delete: if false;
    }

    // Define helper functions here
    function isSignedIn() {
      return request.auth != null;
    }
  }
}